{"mappings":"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","sources":["index.js"],"sourcesContent":["/**\n * state: 'empty' | 'weak' | 'strong'\n * value: 0 | 1\n * recomended: 0 | 1 | 2 | 3\n */\nhandleLanguage();\nlet cash = [];\nlet isNoWeakSelected = handleNoBombsAdviseChange();\naddInputsListeners();\n\nlet mainField = [[], [], [], [], []];\n\nmainField.forEach((arr) => {\n    while (arr.length !== 5) {\n        arr.push({\n            value: 0,\n            state: \"empty\",\n            recomended: 0,\n        });\n    }\n});\ncashField(mainField);\n// -2 на первые 2 клетки\nlet step = -2;\nlet strongs = 0;\n\nconst container = document.getElementById(\"container\");\n\nmainField.forEach((internalArray, i) => {\n    internalArray.forEach((square, j) => {\n        const div = document.createElement(\"div\");\n        div.className = \"square\";\n        div.id = `${i}${j}`;\n        div.addEventListener(\"click\", () => {\n            const prevStrongs = strongs;\n            const current = mainField[i][j];\n            if (step < 0) {\n                current.value = 1;\n                current.state = \"weak\";\n                div.classList.add(current.state);\n            } else {\n                changeNearSquares(i, j, mainField);\n                findFullLines(mainField, incrementStrongs, true);\n            }\n            step++;\n            if (step % 3 === 0 && step !== 0 && prevStrongs === strongs) {\n                makeAlert();\n            }\n            if (step >= 0) {\n                const recomendations = defineRecomendations(mainField);\n                render(mainField, recomendations, false);\n            }\n            cashField(mainField);\n        });\n        container.append(div);\n    });\n});\n\nfunction render(field, recomendations, isStepBack) {\n    if (mainField !== field) {\n        mainField = deepCopy(field);\n    }\n\n    const recs = [];\n\n    if (recomendations) {\n        recomendations.forEach((recomendation) => {\n            recs.push(recomendation.moves[0]);\n        });\n    }\n\n    mainField.forEach((internalArray, i) => {\n        internalArray.forEach((square, j) => {\n            const id = `${i}${j}`;\n            const div = document.getElementById(id);\n            if (!isStepBack) {\n                square.recomended = recs.length > 0 ? recs.findIndex((recId) => recId === id) + 1 : 0;\n            }\n            div.className = `square ${square.state} ${getClassByRec(square.recomended)}`;\n        });\n    });\n}\n\nfunction incrementStrongs() {\n    strongs++;\n}\n\nfunction findFullLines(field, incrementCallback, needToChangeState) {\n    let isClown = false;\n    for (let i = 0; i < 5; i++) {\n        if (field[i][0].value) {\n            const condition = field[i].reduce((prev, current) => prev + current.value, 0) === 5;\n            if (condition) {\n                field[i].forEach((square, idx) => {\n                    if (square.state !== \"strong\") {\n                        if (needToChangeState) square.state = \"strong\";\n                        incrementCallback();\n                    }\n                    if (i === 1 && idx === 1) {\n                        isClown = true;\n                    }\n                });\n            }\n        }\n    }\n    for (let j = 0; j < 5; j++) {\n        if (field[0][j].value) {\n            let i = 0;\n            for (; i < 5; i++) {\n                if (!field[i][j].value) {\n                    break;\n                }\n            }\n            if (i === 5) {\n                for (let t = 0; t < 5; t++) {\n                    if (field[t][j].state !== \"strong\") {\n                        if (needToChangeState) {\n                            field[t][j].state = \"strong\";\n                        }\n                        if (t === 1 && j === 1) {\n                            isClown = true;\n                        }\n                        incrementCallback();\n                    }\n                }\n            }\n        }\n    }\n\n    return isClown;\n}\n\nfunction getClassByRec(rec) {\n    switch (rec) {\n        case 3:\n            return \"low-req\";\n        case 2:\n            return \"mid-req\";\n        case 1:\n            return \"top-req\";\n        default:\n            return \"\";\n    }\n}\n\nfunction changeNearSquares(i, j, arrayI) {\n    changeSquareProps(i, j, arrayI);\n\n    if (i - 1 >= 0) {\n        changeSquareProps(i - 1, j, arrayI);\n    }\n    if (i + 1 <= 4) {\n        changeSquareProps(i + 1, j, arrayI);\n    }\n    if (j - 1 >= 0) {\n        changeSquareProps(i, j - 1, arrayI);\n    }\n    if (j + 1 <= 4) {\n        changeSquareProps(i, j + 1, arrayI);\n    }\n}\n\nfunction changeSquareProps(i, j, arrayI) {\n    const square = arrayI[i][j];\n    if (square.value === 0) {\n        square.value = 1;\n        square.state = \"weak\";\n    } else if (square.value === 1 && square.state === \"weak\") {\n        square.value = 0;\n        square.state = \"empty\";\n    }\n}\n\nfunction defineRecomendations(field) {\n    if (step % 3 === 0) {\n        const firstStepVariants = defineFirstStepVariants(field);\n        const secondStepVariants = [];\n        const thirdStepVariants = [];\n\n        firstStepVariants.forEach((variant) => {\n            defineSecondStepVariants(variant, null, secondStepVariants);\n        });\n\n        secondStepVariants.forEach((variant) => {\n            defineThirdStepVariants(variant, null, thirdStepVariants);\n        });\n\n        thirdStepVariants.sort(comparator);\n        return getDifferentVariants(thirdStepVariants);\n    }\n    if (step % 3 === 1) {\n        const firstStepVariants = defineFirstStepVariants(field);\n        const thirdStepVariants = [];\n\n        firstStepVariants.forEach((variant) => {\n            defineThirdStepVariants(variant, null, thirdStepVariants);\n        });\n\n        thirdStepVariants.sort(comparator);\n        return getDifferentVariants(thirdStepVariants);\n    }\n\n    if (step % 3 === 2) {\n        const onlyVariants = [];\n        defineThirdStepVariants(null, field, onlyVariants);\n        onlyVariants.sort(comparator);\n        return getDifferentVariants(onlyVariants);\n    }\n\n    function defineFirstStepVariants(field) {\n        let variants = [];\n        for (let i = 0; i < field.length; i++) {\n            for (let j = 0; j < field[i].length; j++) {\n                if (field[i][j].state === \"strong\") {\n                    continue;\n                }\n                if (isNoWeakSelected && field[i][j].state === \"weak\") {\n                    continue;\n                }\n                const variant = checkArea(i, j, field, strongs);\n\n                // Что-то пока не хотим взрываться и blow\n                if (variant && !variant.isBlow && !variant.isClown) {\n                    variants.push(variant);\n                }\n            }\n        }\n        return variants.sort(comparator);\n    }\n    function defineSecondStepVariants(prevVariant, prevField, arrayToSave) {\n        const bombsDefault = prevVariant ? prevVariant.bombs : null;\n        const movesDefault = prevVariant ? prevVariant.moves : null;\n        const field = prevVariant ? prevVariant.field : prevField;\n        for (let i = 0; i < 5; i++) {\n            for (let j = 0; j < 5; j++) {\n                if (field[i][j].state === \"strong\") {\n                    continue;\n                }\n                if (isNoWeakSelected && field[i][j].state === \"weak\") {\n                    continue;\n                }\n                const variant = checkArea(i, j, field, strongs, bombsDefault, movesDefault);\n\n                //  Тут пока тоже blow не хотим\n                if (variant && !variant.isBlow && !variant.isClown) {\n                    arrayToSave.push(variant);\n                }\n            }\n        }\n        arrayToSave.sort(comparator);\n    }\n    function defineThirdStepVariants(prevVariant, prevField, arrayToSave) {\n        const bombsDefault = prevVariant ? prevVariant.bombs : null;\n        const movesDefault = prevVariant ? prevVariant.moves : null;\n        const field = prevVariant ? prevVariant.field : prevField;\n        for (let i = 0; i < 5; i++) {\n            for (let j = 0; j < 5; j++) {\n                if (field[i][j].state === \"strong\") {\n                    continue;\n                }\n\n                const variant = checkArea(i, j, field, strongs, bombsDefault, movesDefault);\n\n                if (variant && variant.isBlow && !variant.isClown) {\n                    arrayToSave.push(variant);\n                }\n            }\n        }\n    }\n    function checkArea(i, j, field, strongsDefault, bombsDefault, movesDefault) {\n        const resultObj = {\n            bombs: bombsDefault ? bombsDefault : 0,\n            field: deepCopy(field),\n            moves: movesDefault ? [...movesDefault] : [],\n            isBlow: false,\n            continuity: 0,\n            isClown: false,\n        };\n\n        let strongs = strongsDefault;\n\n        resultObj.moves.push(`${i}${j}`);\n        addBombsOnField(i, j, resultObj);\n        if (i - 1 >= 0) {\n            addBombsOnField(i - 1, j, resultObj);\n        }\n        if (i + 1 <= 4) {\n            addBombsOnField(i + 1, j, resultObj);\n        }\n        if (j - 1 >= 0) {\n            addBombsOnField(i, j - 1, resultObj);\n        }\n        if (j + 1 <= 4) {\n            addBombsOnField(i, j + 1, resultObj);\n        }\n\n        resultObj.isClown = findFullLines(\n            resultObj.field,\n            () => {\n                strongs++;\n            },\n            false\n        );\n\n        resultObj.continuity = findMaxContinuity(getMatrix(resultObj.field));\n\n        if (strongs !== strongsDefault) {\n            resultObj.isBlow = true;\n        }\n\n        return resultObj;\n    }\n}\n\nfunction addBombsOnField(x, y, resultObj) {\n    if (resultObj.field[x][y].state === \"empty\") {\n        resultObj.bombs += 1;\n        resultObj.field[x][y].state = \"weak\";\n        resultObj.field[x][y].value = 1;\n    } else if (resultObj.field[x][y].state === \"weak\") {\n        resultObj.bombs -= 1;\n        resultObj.field[x][y].state = \"empty\";\n        resultObj.field[x][y].value = 0;\n    }\n}\n\nfunction cashField(field) {\n    cash.push(deepCopy(field));\n}\nfunction cashStepBack() {\n    cash.pop();\n}\nfunction deepCopy(object) {\n    return JSON.parse(JSON.stringify(object));\n}\nfunction getMatrix(field) {\n    const matrix = [];\n    field.forEach((row, i) => {\n        matrix[i] = row.map((column) => column.state);\n    });\n    return matrix;\n}\n\nfunction findMaxContinuity(matrix) {\n    let rowsL = matrix.length;\n    let colsL = matrix[0].length;\n    const arrOfContinuities = [];\n\n    function mark(matrix, R, C, idxToInc) {\n        matrix[R][C] = \"marked\";\n        arrOfContinuities[idxToInc] ? (arrOfContinuities[idxToInc] += 1) : (arrOfContinuities[idxToInc] = 1);\n        if (matrix[R][C - 1] === \"empty\") {\n            mark(matrix, R, C - 1, idxToInc);\n        }\n        if (matrix[R][C + 1] === \"empty\") {\n            mark(matrix, R, C + 1, idxToInc);\n        }\n        if (matrix?.[R - 1]?.[C] === \"empty\") {\n            mark(matrix, R - 1, C, idxToInc);\n        }\n        if (matrix?.[R + 1]?.[C] === \"empty\") {\n            mark(matrix, R + 1, C, idxToInc);\n        }\n    }\n\n    for (let R = 0; R < rowsL; R++) {\n        for (let C = 0; C < colsL; C++) {\n            if (matrix[R][C] === \"empty\") {\n                mark(matrix, R, C, arrOfContinuities.length);\n            }\n        }\n    }\n    return getMaxOfArray(arrOfContinuities);\n}\n\nfunction getMaxOfArray(numArray) {\n    return Math.max.apply(null, numArray);\n}\n\nfunction comparator(a, b) {\n    if (a.continuity > b.continuity) return -1;\n    if (a.continuity < b.continuity) return 1;\n    if (a.bombs > b.bombs) return 1;\n    if (a.bombs < b.bombs) return -1;\n}\n\nfunction addInputsListeners() {\n    const stepCancelHandler = () => {\n        if (cash.length > 1) {\n            cash.pop();\n            step--;\n            render(cash[cash.length - 1], null, true);\n        }\n    };\n    const clearFieldHandler = () => {\n        cash = [cash[0]];\n        step = -2;\n        strongs = getCurrentStrongsCount(cash[0]);\n        render(cash[0], null, true);\n    };\n    const isNoWeakChangeHandler = (event) => {\n        isNoWeakSelected = event.target.checked;\n        localStorage.setItem(\"kykyNoBombsOnWeak\", `${isNoWeakSelected}`);\n    };\n\n    document.getElementById(\"cancel\").addEventListener(\"click\", stepCancelHandler);\n    document.getElementById(\"clear\").addEventListener(\"click\", clearFieldHandler);\n    document.getElementById(\"switch-1\").addEventListener(\"change\", isNoWeakChangeHandler);\n}\n\nfunction handleNoBombsAdviseChange() {\n    const checkbox = document.getElementById(\"switch-1\");\n    const userChoise = localStorage.getItem(\"kykyNoBombsOnWeak\");\n    if (userChoise === \"true\") {\n        checkbox.checked = true;\n    } else if (userChoise === \"false\") {\n        checkbox.checked = false;\n    }\n    return checkbox.checked;\n}\n\nfunction getCurrentStrongsCount(field) {\n    let strongs = 0;\n    field.forEach((array) => {\n        array.forEach((cell) => {\n            if (cell.state === \"strong\") {\n                strongs++;\n            }\n        });\n    });\n    return strongs;\n}\n\nfunction handleLanguage() {\n    let currentLanguage = localStorage.getItem(\"kukuLanguage\");\n    const checkbox = document.getElementById(\"switch-2\");\n\n    if (currentLanguage === \"En\") {\n        checkbox.checked = true;\n    } else {\n        currentLanguage = \"Ru\";\n        checkbox.checked = false;\n    }\n\n    applyLanguage(currentLanguage);\n\n    const languageChangeHandler = (event) => {\n        currentLanguage = event.target.checked ? \"En\" : \"Ru\";\n        localStorage.setItem(\"kukuLanguage\", currentLanguage);\n        applyLanguage(currentLanguage);\n    };\n\n    checkbox.addEventListener(\"change\", languageChangeHandler);\n}\n\nfunction applyLanguage(lang) {\n    const strings = {\n        cancel: [\"Отменить ход\", \"Undo move\"],\n        clear: [\"Очистить поле\", \"Clear field\"],\n        \"bombs-switcher\": [\"Не советовать ставить бомбы на черепа\", \"Do not advise putting bombs on skulls\"],\n        tip: [\"Используйте Иону! (Ctrl + C)\", \"Use Inanna! (Ctrl + C)\"],\n    };\n    Object.entries(strings).forEach(([id, variants]) => {\n        document.getElementById(id).innerHTML = variants[lang === \"Ru\" ? 0 : 1];\n    });\n}\n\nfunction getDifferentVariants(variants) {\n    const usedMoves = [];\n    const differenVariants = [];\n\n    for (let i = 0; i < variants.length; i++) {\n        if (usedMoves.length < 3) {\n            if (!usedMoves.includes(variants[i].moves[0])) {\n                differenVariants.push(variants[i]);\n                usedMoves.push(variants[i].moves[0]);\n            }\n        } else {\n            break;\n        }\n    }\n\n    return differenVariants;\n}\n\nfunction makeAlert() {\n    const tip = document.getElementById(\"tip\");\n    tip.className = \"show\";\n\n    setTimeout(() => {\n        tip.classList.toggle(\"show\");\n    }, 8000);\n}\n"],"names":["handleLanguage","cash","isNoWeakSelected","handleNoBombsAdviseChange","addInputsListeners","mainField","forEach","arr","length","push","value","state","recomended","cashField","step","strongs","container","document","getElementById","render","field","recomendations","isStepBack","deepCopy","recs","recomendation","moves","internalArray","i","square","j","id","div","findIndex","recId","className","getClassByRec","incrementStrongs","findFullLines","incrementCallback","needToChangeState","isClown","reduce","prev","current","idx","i1","t","rec","changeNearSquares","arrayI","changeSquareProps","defineRecomendations","firstStepVariants","defineFirstStepVariants","secondStepVariants","thirdStepVariants","variant","prevVariant","prevField","arrayToSave","bombsDefault","bombs","movesDefault","checkArea","isBlow","sort","comparator","defineSecondStepVariants","defineThirdStepVariants","getDifferentVariants","firstStepVariants1","thirdStepVariants1","onlyVariants","variants","strongsDefault","resultObj","continuity","addBombsOnField","findMaxContinuity","getMatrix","x","y","cashStepBack","pop","object","JSON","parse","stringify","matrix","row","map","column","rowsL","colsL","arrOfContinuities","mark","R","C","idxToInc","getMaxOfArray","numArray","Math","max","apply","a","b","addEventListener","getCurrentStrongsCount","event","target","checked","localStorage","setItem","checkbox","userChoise","getItem","array","cell","currentLanguage","applyLanguage","lang","Object","entries","cancel","clear","tip","innerHTML","usedMoves","differenVariants","includes","makeAlert","setTimeout","classList","toggle","createElement","prevStrongs","add","append"],"version":3,"file":"index.4d713f38.js.map"}